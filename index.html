<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="theme-color" content="#0b0a12" />
  <title>üê¶üé≠ Carnario 2026 ‚Äî Rio (Blocos & Festas)</title>

  <style>
    :root{
      --bg0:#060511; --bg1:#0b0a12;
      --card: rgba(255,255,255,.08);
      --stroke: rgba(255,255,255,.14);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.70);
      --a:#ffcc00; --b:#ff2ea6; --c:#2ef2ff; --d:#8b5cff; --e:#35ff7a;
      --shadow: 0 18px 60px rgba(0,0,0,.55);
      --r: 22px;
    }
    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color: var(--text);
      background:
        radial-gradient(1200px 700px at 15% 20%, rgba(255,204,0,.18), transparent 60%),
        radial-gradient(1000px 650px at 85% 30%, rgba(46,242,255,.16), transparent 60%),
        radial-gradient(900px 650px at 45% 90%, rgba(255,46,166,.12), transparent 60%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      overflow-x:hidden;
    }
    .aurora{
      position:fixed; inset:-30%;
      filter: blur(55px);
      opacity:.85; z-index:-2;
      background: conic-gradient(from 180deg at 50% 50%,
        rgba(255,204,0,.25), rgba(255,46,166,.20), rgba(46,242,255,.18),
        rgba(139,92,255,.18), rgba(53,255,122,.14), rgba(255,204,0,.25));
      animation: spin 14s linear infinite;
    }
    @keyframes spin { to{ transform: rotate(360deg); } }

    .wrap{ min-height:100vh; display:grid; place-items:center; padding:22px 14px 56px; }
    .card{
      width:min(1060px, 100%);
      border-radius: var(--r);
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      border: 1px solid var(--stroke);
      box-shadow: var(--shadow);
      padding: clamp(16px, 3vw, 28px);
      position:relative;
      overflow:hidden;
    }
    header{ display:flex; justify-content:space-between; gap:14px; flex-wrap:wrap; align-items:flex-start; }
    h1{ margin:0; font-size: clamp(26px, 3.6vw, 44px); letter-spacing:-.02em; }
    .subtitle{ color:var(--muted); margin-top:6px; font-size:14px; line-height:1.35; max-width:70ch; }
    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding:10px 12px; border-radius:999px;
      border:1px solid var(--stroke);
      background: rgba(0,0,0,.18);
      backdrop-filter: blur(10px);
      font-size:13px; color:var(--muted);
    }

    .grid{
      margin-top:18px;
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap: 14px;
    }
    @media (max-width: 920px){ .grid{ grid-template-columns:1fr; } }

    .panel{
      border-radius: 18px;
      background: rgba(0,0,0,.16);
      border: 1px solid var(--stroke);
      padding: 14px;
    }
    .kpis{ display:grid; grid-template-columns: repeat(4, 1fr); gap: 10px; }
    @media (max-width: 680px){ .kpis{ grid-template-columns: repeat(2, 1fr); } }
    .kpi{
      border-radius: 16px;
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      border: 1px solid var(--stroke);
      padding: 12px;
      text-align:center;
    }
    .kpi .n{
      font-size: clamp(22px, 3vw, 34px);
      font-weight: 800;
      letter-spacing:-.02em;
    }
    .kpi .l{ color:var(--muted); font-size:12px; }

    .barWrap{ margin-top:12px; }
    .bar{
      width:100%; height:12px;
      background: rgba(255,255,255,.10);
      border: 1px solid var(--stroke);
      border-radius: 999px;
      overflow:hidden;
    }
    .bar > div{
      height:100%;
      width:0%;
      background: linear-gradient(90deg, rgba(255,204,0,.95), rgba(255,46,166,.85), rgba(46,242,255,.85));
      border-radius:999px;
      transition: width .5s ease;
    }
    .barMeta{ margin-top:8px; display:flex; justify-content:space-between; color:var(--muted); font-size:12px; }

    .sectionTitle{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      margin: 0 0 10px;
    }
    .sectionTitle h2{
      margin:0;
      font-size: 16px;
      letter-spacing: .01em;
    }
    .tag{
      padding: 6px 10px;
      border-radius: 999px;
      border:1px solid var(--stroke);
      background: rgba(0,0,0,.16);
      color: var(--muted);
      font-size: 12px;
      white-space:nowrap;
    }

    .list{ display:grid; gap:10px; }
    .item{
      border-radius: 16px;
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.06);
      padding: 12px;
      display:grid;
      grid-template-columns: 1fr auto;
      gap: 12px;
      align-items:center;
    }
    .item h3{ margin:0; font-size: 15px; }
    .meta{ color: var(--muted); font-size: 12px; margin-top: 3px; line-height:1.35; }
    .actions{ display:flex; gap:8px; flex-wrap:wrap; justify-content:flex-end; }
    .btn{
      cursor:pointer;
      border:1px solid var(--stroke);
      background: rgba(0,0,0,.20);
      color: var(--text);
      padding: 9px 10px;
      border-radius: 12px;
      font-size: 12px;
      transition: transform .15s ease, background .15s ease;
      user-select:none;
    }
    .btn:hover{ transform: translateY(-1px); background: rgba(255,255,255,.10); }
    .btn:active{ transform: translateY(0px); }

    a{ color: rgba(46,242,255,.95); text-decoration:none; }
    a:hover{ text-decoration:underline; }

    .note{
      margin-top:10px;
      font-size: 12px;
      color: var(--muted);
      line-height:1.35;
    }

    footer{
      margin-top: 14px;
      display:flex; flex-wrap:wrap; gap:10px;
      justify-content:space-between; align-items:center;
      color: var(--muted);
      font-size: 12px;
    }
    .miniBtns{ display:flex; gap:8px; flex-wrap:wrap; }
  </style>
</head>

<body>
  <div class="aurora" aria-hidden="true"></div>

  <div class="wrap">
    <main class="card">
      <header>
        <div>
          <h1>üê¶üé≠ Carnario 2026 ‚Äî Rio</h1>
          <div class="subtitle">
            Contagem regressiva para <b>13/02/2026</b> (hor√°rio do RJ) + agenda de blocos.
            <br/>
            <span style="opacity:.9">Regra do site:</span> <b>n√£o inventa</b> ‚Äî o que estiver ‚ÄúConfirmado (2026)‚Äù vem com <b>fonte</b>.
          </div>
        </div>
        <div class="pill" id="nowPill">‚è±Ô∏è Atualizando‚Ä¶</div>
      </header>

      <div class="grid">
        <section class="panel">
          <div class="sectionTitle">
            <h2>‚è≥ Falta para 13/02/2026</h2>
            <span class="tag" id="tzTag">TZ: America/Sao_Paulo</span>
          </div>

          <div class="kpis">
            <div class="kpi"><div class="n" id="weeks">‚Äî</div><div class="l">semanas</div></div>
            <div class="kpi"><div class="n" id="days">‚Äî</div><div class="l">dias</div></div>
            <div class="kpi"><div class="n" id="hours">‚Äî</div><div class="l">horas</div></div>
            <div class="kpi"><div class="n" id="mins">‚Äî</div><div class="l">min</div></div>
          </div>

          <div class="barWrap">
            <div class="bar" aria-label="Progresso at√© o dia 13/02/2026">
              <div id="barFill"></div>
            </div>
            <div class="barMeta">
              <span id="progressLeft">‚Äî</span>
              <span id="progressPct">‚Äî%</span>
            </div>
          </div>

          <div class="note">
            *‚ÄúSemanas/dias/horas‚Äù s√£o calculados continuamente. O rel√≥gio usa seu dispositivo, mas o alvo √© fixo em <b>13/02/2026 00:00 (-03:00)</b>.
          </div>

          <footer>
            <span id="statusLine">Pronto.</span>
            <div class="miniBtns">
              <button class="btn" id="shareBtn">üì§ Compartilhar</button>
              <button class="btn" id="copyBtn">üîó Copiar link</button>
              <button class="btn" id="confettiBtn">üéä Confete</button>
            </div>
          </footer>
        </section>

        <aside class="panel">
          <div class="sectionTitle">
            <h2>‚úÖ Confirmados (2026)</h2>
            <span class="tag">com fonte</span>
          </div>

          <div class="list" id="confirmedList"></div>

          <div class="note">
            Fontes: agenda 2026 do <b>Di√°rio do Rio</b>.
            Se voc√™ me mandar o link oficial/p√°gina do bloco para os outros, eu adiciono como ‚Äúconfirmado‚Äù tamb√©m.
          </div>
        </aside>
      </div>

      <section class="panel" style="margin-top:14px;">
        <div class="sectionTitle">
          <h2>üìù Seu roteiro (rascunho)</h2>
          <span class="tag">n√£o confirmado</span>
        </div>

        <div class="list" id="draftList"></div>

        <div class="note">
          Este bloco √© o que voc√™ escreveu (sem data). Para virar ‚ÄúConfirmado (2026)‚Äù, preciso de:
          (i) <b>data</b> e (ii) <b>fonte</b> (link oficial/agenda confi√°vel).
        </div>
      </section>

      <section class="panel" style="margin-top:14px;">
        <div class="sectionTitle">
          <h2>üéüÔ∏è Festas (somente nomes ‚Äî sem inventar detalhes)</h2>
          <span class="tag">aguardando info</span>
        </div>
        <div class="note">
          Baile do Momo ‚Ä¢ SubaJovem ‚Ä¢ Boma ‚Äî se voc√™ mandar os links/datas/locais oficiais, eu coloco aqui com bot√£o de Maps e .ICS.
        </div>
      </section>
    </main>
  </div>

  <canvas id="fx" style="position:fixed;inset:0;pointer-events:none;z-index:10;"></canvas>

  <script>
    // =============================
    // CONFIG
    // =============================
    // Carnaval alvo (Carnario) ‚Äî 13/02/2026 00:00 no fuso -03:00 (America/Sao_Paulo)
    const TARGET = new Date("2026-02-13T00:00:00-03:00");
    const START  = new Date("2025-01-01T00:00:00-03:00"); // base p/ barra de progresso (visual)

    // Confirmados 2026 (com fonte)
    // Fonte: Di√°rio do Rio - Agenda dos Blocos 2026
    const CONFIRMED = [
      {
        title: "Areia",
        when: "15/02/2026 (Domingo) ‚Äî 7h",
        where: "Posto 12, Leblon",
        sourceText: "Di√°rio do Rio (agenda 2026)",
        sourceUrl: "https://diariodorio.com/agenda-dos-blocos-de-rua-do-rio-de-janeiro-em-2026/",
        mapsQuery: "Posto 12 Leblon Rio de Janeiro"
      },
      {
        title: "Sargento Pimenta",
        when: "16/02/2026 (Segunda) ‚Äî 8h",
        where: "Av. Infante Dom Henrique, 75 (Flamengo)",
        sourceText: "Di√°rio do Rio (agenda 2026)",
        sourceUrl: "https://diariodorio.com/agenda-dos-blocos-de-rua-do-rio-de-janeiro-em-2026/",
        mapsQuery: "Avenida Infante Dom Henrique 75 Flamengo Rio de Janeiro"
      },
      {
        title: "Imp√©rio da Cruzada",
        when: "16/02/2026 (Segunda) ‚Äî 14h",
        where: "Av. Delfim Moreira, 12 (Leblon)",
        sourceText: "Di√°rio do Rio (agenda 2026)",
        sourceUrl: "https://diariodorio.com/agenda-dos-blocos-de-rua-do-rio-de-janeiro-em-2026/",
        mapsQuery: "Avenida Delfim Moreira 12 Leblon Rio de Janeiro"
      }
    ];

    // Seu roteiro (sem data -> n√£o confirmado)
    const DRAFT = [
      {
        title: "Escangalha",
        when: "S√°bado ‚Äî 08:00‚Äì12:00",
        where: "Jardim Bot√¢nico (esquina com Pacheco Le√£o)",
        note: "Sem data/fonte no texto ‚Äî manter como rascunho."
      },
      {
        title: "Bloco Areia",
        when: "Domingo ‚Äî 07:00",
        where: "Leblon",
        note: "J√° existe entrada confirmada (Areia) para 15/02/2026 7h ‚Äî acima."
      },
      {
        title: "Sargento Pimenta",
        when: "Segunda ‚Äî 08:00",
        where: "Gl√≥ria",
        note: "Agenda 2026 listou endere√ßo no Flamengo; confira ponto exato no dia."
      },
      {
        title: "Imp√©rio da Cruzada",
        when: "Segunda ‚Äî 14:00",
        where: "Leblon",
        note: "Confirmado 16/02/2026 14h ‚Äî acima."
      },
      {
        title: "Jardim Bot√¢nico",
        when: "Ter√ßa ‚Äî 08:00 e 14:00",
        where: "Jardim Bot√¢nico",
        note: "Sem bloco/nome + sem fonte/datas ‚Äî rascunho."
      }
    ];

    // =============================
    // UI HELPERS
    // =============================
    const $ = (id) => document.getElementById(id);

    function fmtNow() {
      const now = new Date();
      const opts = { weekday:"short", year:"numeric", month:"2-digit", day:"2-digit", hour:"2-digit", minute:"2-digit", second:"2-digit" };
      return now.toLocaleString("pt-BR", opts);
    }

    function openMaps(query){
      const url = "https://www.google.com/maps/search/?api=1&query=" + encodeURIComponent(query);
      window.open(url, "_blank", "noopener,noreferrer");
    }

    async function copyText(text){
      try{
        await navigator.clipboard.writeText(text);
        setStatus("‚úÖ Copiado.");
      }catch{
        setStatus("‚ùå N√£o consegui copiar (permiss√£o do navegador).");
      }
    }

    function setStatus(text){
      $("statusLine").textContent = text;
      clearTimeout(window.__st);
      window.__st = setTimeout(()=> $("statusLine").textContent = "Pronto.", 2500);
    }

    // =============================
    // RENDER LISTS
    // =============================
    function renderConfirmed(){
      const root = $("confirmedList");
      root.innerHTML = "";

      CONFIRMED.forEach((ev) => {
        const div = document.createElement("div");
        div.className = "item";
        div.innerHTML = `
          <div>
            <h3>üé∫ ${escapeHtml(ev.title)}</h3>
            <div class="meta"><b>Quando:</b> ${escapeHtml(ev.when)}<br/>
              <b>Onde:</b> ${escapeHtml(ev.where)}<br/>
              <b>Fonte:</b> <a href="${ev.sourceUrl}" target="_blank" rel="noopener noreferrer">${escapeHtml(ev.sourceText)}</a>
            </div>
          </div>
          <div class="actions">
            <button class="btn">üó∫Ô∏è Maps</button>
            <button class="btn">üìã Copiar</button>
          </div>
        `;
        const [mapsBtn, copyBtn] = div.querySelectorAll("button");
        mapsBtn.onclick = () => openMaps(ev.mapsQuery || (ev.where + " Rio de Janeiro"));
        copyBtn.onclick = () => copyText(`${ev.title} ‚Äî ${ev.when} ‚Äî ${ev.where} ‚Äî Fonte: ${ev.sourceUrl}`);
        root.appendChild(div);
      });
    }

    function renderDraft(){
      const root = $("draftList");
      root.innerHTML = "";

      DRAFT.forEach((ev) => {
        const div = document.createElement("div");
        div.className = "item";
        div.innerHTML = `
          <div>
            <h3>üßÉ ${escapeHtml(ev.title)}</h3>
            <div class="meta"><b>Quando:</b> ${escapeHtml(ev.when)}<br/>
              <b>Onde:</b> ${escapeHtml(ev.where)}<br/>
              <span style="opacity:.9"><b>Obs:</b> ${escapeHtml(ev.note || "Rascunho.")}</span>
            </div>
          </div>
          <div class="actions">
            <button class="btn">üó∫Ô∏è Maps</button>
            <button class="btn">üìã Copiar</button>
          </div>
        `;
        const [mapsBtn, copyBtn] = div.querySelectorAll("button");
        mapsBtn.onclick = () => openMaps(ev.where + " Rio de Janeiro");
        copyBtn.onclick = () => copyText(`[RASCUNHO] ${ev.title} ‚Äî ${ev.when} ‚Äî ${ev.where}`);
        root.appendChild(div);
      });
    }

    function escapeHtml(s){
      return String(s).replace(/[&<>"']/g, c => ({
        "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"
      }[c]));
    }

    // =============================
    // COUNTDOWN
    // =============================
    function tick(){
      const now = new Date();
      $("nowPill").textContent = "‚è±Ô∏è Agora: " + fmtNow();

      let diff = TARGET - now;
      if (diff < 0) diff = 0;

      const totalSeconds = Math.floor(diff/1000);
      const totalMinutes = Math.floor(totalSeconds/60);
      const totalHours   = Math.floor(totalMinutes/60);
      const totalDays    = Math.floor(totalHours/24);
      const weeks = Math.floor(totalDays/7);
      const days  = totalDays % 7;
      const hours = totalHours % 24;
      const mins  = totalMinutes % 60;

      $("weeks").textContent = weeks;
      $("days").textContent  = days;
      $("hours").textContent = hours;
      $("mins").textContent  = mins;

      // progress bar (visual): START -> TARGET
      const span = TARGET - START;
      const done = now - START;
      const pct  = Math.max(0, Math.min(1, done / span));
      $("barFill").style.width = (pct*100).toFixed(2) + "%";
      $("progressPct").textContent = (pct*100).toFixed(1) + "%";

      const daysLeftTotal = Math.ceil((TARGET - now)/(1000*60*60*24));
      $("progressLeft").textContent = (daysLeftTotal > 0 ? `${daysLeftTotal} dias restantes` : "√â HOJE!");
    }

    // =============================
    // CONFETTI FX (simple)
    // =============================
    const canvas = $("fx");
    const ctx = canvas.getContext("2d");
    let particles = [];
    function resize(){
      canvas.width = innerWidth * devicePixelRatio;
      canvas.height = innerHeight * devicePixelRatio;
      canvas.style.width = innerWidth + "px";
      canvas.style.height = innerHeight + "px";
      ctx.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0);
    }
    addEventListener("resize", resize);
    resize();

    function popConfetti(){
      const n = 160;
      for (let i=0;i<n;i++){
        particles.push({
          x: Math.random()*innerWidth,
          y: -10,
          vx: (Math.random()-0.5)*2.2,
          vy: 2 + Math.random()*3.2,
          r: 2 + Math.random()*4,
          rot: Math.random()*Math.PI*2,
          vr: (Math.random()-0.5)*0.2,
          life: 180 + Math.random()*120
        });
      }
      setStatus("üéä Confete!");
    }

    function animate(){
      ctx.clearRect(0,0,innerWidth,innerHeight);
      particles = particles.filter(p => p.life-- > 0);
      for (const p of particles){
        p.x += p.vx;
        p.y += p.vy;
        p.rot += p.vr;
        p.vy += 0.01; // gravity
        ctx.save();
        ctx.translate(p.x,p.y);
        ctx.rotate(p.rot);
        ctx.fillStyle = `hsla(${(p.life*3)%360}, 95%, 60%, .9)`;
        ctx.fillRect(-p.r, -p.r, p.r*2.2, p.r*1.2);
        ctx.restore();
      }
      requestAnimationFrame(animate);
    }
    animate();

    // =============================
    // SHARE / COPY
    // =============================
    $("copyBtn").onclick = () => copyText(location.href);

    $("shareBtn").onclick = async () => {
      if (navigator.share){
        try{
          await navigator.share({ title: document.title, text: "Carnario 2026 ‚Äî contagem e agenda RJ", url: location.href });
          setStatus("üì§ Compartilhado!");
        }catch{
          setStatus("‚ùå Share cancelado.");
        }
      } else {
        copyText(location.href);
        setStatus("Seu navegador n√£o tem Share ‚Äî copiei o link.");
      }
    };

    $("confettiBtn").onclick = popConfetti;

    // init
    renderConfirmed();
    renderDraft();
    tick();
    setInterval(tick, 1000);
  </script>
</body>
</html>
